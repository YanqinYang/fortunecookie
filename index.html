<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortune Cookie</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            text-align: center;
        }
        .cookie-container {
            position: relative;
            width: 350px;
            height: 250px;
            margin: 20px auto;
        }
        .cookie-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            cursor: pointer;
            position: absolute;
            top: 0;
            left: 0;
            transition: all 0.5s ease;
        }
        #crackedCookie {
            opacity: 0;
            pointer-events: none;
        }
        .fortune-text {
            position: absolute;
            top: 58%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            color: #2575fc;
            font-size: 14px;
            font-weight: normal;
            display: none;
            z-index: 20; /* 提高层级 */
            line-height: 1.3;
            text-align: center;
            word-wrap: break-word;
            padding: 0 5px;
        }
        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px) rotate(-5deg); }
            40% { transform: translateX(10px) rotate(5deg); }
            60% { transform: translateX(-10px) rotate(-5deg); }
            80% { transform: translateX(10px) rotate(5deg); }
        }
        .action-buttons {
            margin-top: 30px;
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        button, .action-btn {
            width: 200px;
            background: #FF6B6B;
            color: white;
            border: none;
            padding: 12px 0;
            margin: 5px 0;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
            text-align: center;
            font-size: 14px;
        }
        button:hover {
            transform: translateY(-2px);
            background: #FF5252;
        }
        .facebook {
            background: #3B5998;
        }
        .facebook:hover {
            background: #344e86;
        }
    </style>
</head>
<body>
    <h1>Fortune Cookie</h1>
    
    <div class="cookie-container">
        <!-- 调整DOM顺序确保层级 -->
        <img src="https://raw.githubusercontent.com/yanqinyang/fortunecookie/main/FC.png" 
             id="wholeCookie" class="cookie-img" alt="Fortune Cookie">
        <div id="fortune" class="fortune-text"></div>
        <img src="https://raw.githubusercontent.com/yanqinyang/fortunecookie/main/CFC.png" 
             id="crackedCookie" class="cookie-img" alt="Cracked Cookie">
    </div>
    
    <div class="action-buttons" id="actionButtons">
        <button id="crackAgain">Crack Again</button>
        <button class="action-btn facebook" id="shareFacebook">Share to Facebook</button>
    </div>

    <audio id="crackSound" src="https://raw.githubusercontent.com/yanqinyang/fortunecookie/main/ccrack.mp3" preload="auto"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const wholeCookie = document.getElementById('wholeCookie');
            const crackedCookie = document.getElementById('crackedCookie');
            const fortune = document.getElementById('fortune');
            const actionButtons = document.getElementById('actionButtons');
            const crackAgainBtn = document.getElementById('crackAgain');
            const shareFacebook = document.getElementById('shareFacebook');
            const crackSound = document.getElementById('crackSound');
            
            const fortunes = [
                "Today is your lucky day",
                "Good news is coming soon",
                "Smile to attract joy",
                "Adventure awaits you",
                "Success is in your future",
                "Trust your intuition",
                "A surprise is coming",
                "Love is around the corner",
                "Your creativity shines",
                "New opportunities arise"
                // 补充更多...
            ];
            
            function crackCookie() {
                crackSound.currentTime = 0;
                crackSound.play().catch(e => console.log("Audio error:", e));
                
                wholeCookie.classList.add('shake');
                
                setTimeout(() => {
                    wholeCookie.style.opacity = '0';
                    crackedCookie.style.opacity = '1';
                    fortune.style.display = 'block';
                    fortune.textContent = fortunes[Math.floor(Math.random() * fortunes.length)];
                    actionButtons.style.display = 'flex';
                }, 500);
            }
            
            function resetCookie() {
                wholeCookie.style.opacity = '1';
                crackedCookie.style.opacity = '0';
                fortune.style.display = 'none';
                actionButtons.style.display = 'none';
            }
            
            function shareToFacebook(e) {
                e.preventDefault();
                const text = encodeURIComponent("My fortune says: " + fortune.textContent);
                window.open(`https://www.facebook.com/sharer/sharer.php?u=https://yanqinyang.github.io/fortunecookie/&quote=${text}`, '_blank');
            }
            
            wholeCookie.onclick = crackCookie;
            crackAgainBtn.onclick = resetCookie;
            shareFacebook.onclick = shareToFacebook;
        });
    </script>
</body>
</html>
