<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortune Cookie</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            text-align: center;
        }
        .cookie-container {
            position: relative;
            width: 350px; /* 调大容器 */
            height: 250px; /* 调大容器 */
            margin: 20px auto;
        }
        .cookie-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            cursor: pointer;
            position: absolute;
            top: 0;
            left: 0;
            transition: all 0.5s ease;
        }
        #crackedCookie {
            opacity: 0;
            pointer-events: none;
        }
        .fortune-text {
            position: absolute;
            top: 52%; /* 精确调整到白色区域 */
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60%; /* 限制宽度 */
            color: #2575fc;
            font-size: 16px; /* 调小字号 */
            font-weight: normal; /* 取消加粗 */
            display: none;
            z-index: 10;
            line-height: 1.4;
        }
        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px) rotate(-5deg); }
            40% { transform: translateX(10px) rotate(5deg); }
            60% { transform: translateX(-10px) rotate(-5deg); }
            80% { transform: translateX(10px) rotate(5deg); }
        }
        .action-buttons {
            margin-top: 30px;
            display: none;
            justify-content: center; /* 按钮居中 */
            gap: 15px; /* 按钮间距 */
            flex-wrap: wrap;
        }
        button {
            background: #FF6B6B;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
            flex-shrink: 0; /* 防止按钮挤压 */
        }
        button:hover {
            transform: translateY(-2px);
            background: #FF5252;
        }
        .facebook {
            background: #3B5998;
            display: inline-block;
            padding: 12px 25px;
            border-radius: 50px;
            color: white;
            text-decoration: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        .facebook:hover {
            transform: translateY(-2px);
            background: #344e86;
        }
    </style>
</head>
<body>
    <h1>Fortune Cookie</h1>
    
    <div class="cookie-container">
        <img src="https://raw.githubusercontent.com/yanqinyang/fortunecookie/main/CFC.png" 
             id="crackedCookie" class="cookie-img" alt="Cracked Cookie">
        <img src="https://raw.githubusercontent.com/yanqinyang/fortunecookie/main/FC.png" 
             id="wholeCookie" class="cookie-img" alt="Fortune Cookie">
        <div id="fortune" class="fortune-text"></div>
    </div>
    
    <div class="action-buttons" id="actionButtons">
        <button id="crackAgain">Crack Again</button>
        <a href="#" class="facebook" id="shareFacebook">Share to Facebook</a>
    </div>

    <audio id="crackSound" src="https://raw.githubusercontent.com/yanqinyang/fortunecookie/main/ccrack.mp3" preload="auto"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const wholeCookie = document.getElementById('wholeCookie');
            const crackedCookie = document.getElementById('crackedCookie');
            const fortune = document.getElementById('fortune');
            const actionButtons = document.getElementById('actionButtons');
            const crackAgainBtn = document.getElementById('crackAgain');
            const shareFacebook = document.getElementById('shareFacebook');
            const crackSound = document.getElementById('crackSound');
            
            // 99条短运势（示例20条，实际使用时请补充完整）
            const fortunes = [
                "Today is your lucky day",
                "Good news is coming soon",
                "Smile to attract joy",
                "Adventure awaits you",
                "Success is in your future",
                "Trust your intuition",
                "A surprise is coming",
                "Love is around the corner",
                "Your creativity shines",
                "New opportunities arise",
                "Dream big, achieve bigger",
                "Kindness brings rewards",
                "Good things take time",
                "Your energy attracts luck",
                "Challenges make you stronger",
                "Happiness is a choice",
                "Learn from every experience",
                "Your potential is limitless",
                "Patience leads to success",
                "The best is yet to come",
                /* 添加更多短句使总数达到99条 */
                "Embrace new beginnings",
                "Your smile changes everything",
                "Luck favors the bold",
                "Great ideas are coming",
                "Stay positive, stay winning",
                "Your hard work pays off",
                "Miracles happen daily",
                "Believe in your magic",
                "Good vibes only",
                "The universe supports you",
                "Offer Yanqin your favorite fortune cookie quota",
                "You will get what you want Today"
                // 继续添加直到99条...
            ];
            
            function crackCookie() {
                crackSound.currentTime = 0;
                crackSound.play().catch(e => console.log("Audio error:", e));
                
                wholeCookie.classList.add('shake');
                
                setTimeout(() => {
                    wholeCookie.style.opacity = '0';
                    crackedCookie.style.opacity = '1';
                    fortune.style.display = 'block';
                    fortune.textContent = fortunes[Math.floor(Math.random() * fortunes.length)];
                    actionButtons.style.display = 'flex'; /* 使用flex布局对齐 */
                }, 500);
            }
            
            function resetCookie() {
                wholeCookie.style.opacity = '1';
                crackedCookie.style.opacity = '0';
                fortune.style.display = 'none';
                actionButtons.style.display = 'none';
            }
            
            function shareToFacebook(e) {
                e.preventDefault();
                const text = encodeURIComponent("My fortune says: " + fortune.textContent + " - Try your fortune cookie now!");
                window.open(`https://www.facebook.com/sharer/sharer.php?u=https://yanqinyang.github.io/fortunecookie/&quote=${text}`, '_blank');
            }
            
            wholeCookie.onclick = crackCookie;
            crackAgainBtn.onclick = resetCookie;
            shareFacebook.onclick = shareToFacebook;
        });
    </script>
</body>
</html>
